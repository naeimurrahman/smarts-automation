<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smartâ€™s Automation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --green:#25D366;
  --dark:#0f172a;
  --gray:#64748b;
  --bg:#f8fafc;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:var(--bg);color:var(--dark)}

.container{max-width:420px;margin:40px auto;padding:20px}

/* CARD */
.card{
  background:#fff;
  padding:26px;
  border-radius:22px;
  box-shadow:0 30px 70px rgba(0,0,0,.15);
  animation:enter .6s ease;
}
@keyframes enter{
  from{opacity:0;transform:translateY(40px) scale(.96)}
  to{opacity:1;transform:none}
}

h1{text-align:center;margin-bottom:6px}
p{text-align:center;color:var(--gray);margin-bottom:20px}

input,textarea,select,button{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #e5e7eb;
  font-size:15px;
}

button{
  background:var(--green);
  color:#fff;
  border:none;
  font-weight:600;
}
button.loading{
  opacity:.75;
  pointer-events:none;
}

/* PHONE */
.phone-row{display:flex;gap:8px;align-items:center}
#country_display{
  width:45%;
  background:#f1f5f9;
  cursor:pointer;
}

/* OTP */
.otp-wrap{
  display:flex;
  gap:6px;
  width:55%;
}
.otp-wrap input{
  width:100%;
  max-width:36px;
  height:48px;
  text-align:center;
  font-size:18px;
  border-radius:8px;
  border:1px solid #d1d5db;
  outline:none;
  transition:.2s;
}
.otp-wrap input:focus{
  border-color:var(--green);
  box-shadow:0 0 0 3px rgba(37,211,102,.25);
}

/* COUNTRY DROPDOWN */
#countryList{
  position:absolute;
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:10px;
  margin-top:4px;
  width:180px;
  max-height:240px;
  overflow-y:auto;
  display:none;
  z-index:999;
}
.country-item{
  padding:10px;
  cursor:pointer;
  font-size:14px;
}
.country-item:hover{background:#f1f5f9}

/* MODAL */
#modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal-box{
  background:#fff;
  padding:24px;
  border-radius:18px;
  width:90%;
  max-width:340px;
  text-align:center;
  animation:pop .4s ease;
}
@keyframes pop{
  from{opacity:0;transform:scale(.9)}
  to{opacity:1;transform:none}
}
.modal-box a{
  display:block;
  background:var(--green);
  color:#fff;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
  text-decoration:none;
}
.modal-box button{
  background:#e5e7eb;
  margin-top:10px;
}
</style>
</head>
<body>

<div class="container">
  <div class="card">
    <h1>Smartâ€™s Automation</h1>
    <p>WhatsApp Automation Setup</p>

    <form id="leadForm"
      action="https://script.google.com/macros/s/AKfycbybXjHhyl-VKrUtVWDnejbUjpEgP6iUBzSF1eLPtqYchXyMmgjqYfey15pgQcUS6TKb/exec"
      method="POST"
      target="hiddenFrame">

      <input type="email" name="email" placeholder="Email Address" required>
      <input type="text" name="name" placeholder="Full Name" required>

      <!-- PHONE -->
      <div class="phone-row" style="position:relative">
        <input id="country_display" value="+880 Bangladesh" readonly>
        <input type="hidden" name="country_code" id="country_code" value="+880">

        <div class="otp-wrap" id="otpWrap"></div>
        <input type="hidden" name="whatsapp" id="whatsapp">

        <div id="countryList"></div>
      </div>

      <select name="business" required>
        <option value="">Select Business Type</option>
        <option>Agency</option>
        <option>E-commerce</option>
        <option>Service Provider</option>
        <option>Local Business</option>
        <option>Personal Brand</option>
      </select>

      <textarea name="message" placeholder="Message / Requirement"></textarea>

      <button id="btn" type="submit">Submit Request</button>
    </form>

    <iframe name="hiddenFrame" style="display:none"></iframe>
  </div>
</div>

<!-- THANK YOU MODAL -->
<div id="modal">
  <div class="modal-box">
    <h3>ðŸŽ‰ Thank You!</h3>
    <p>Your request has been received.</p>
    <p style="font-size:14px;color:#64748b">
      If you want, type or grab it ðŸ‘‡
    </p>
    <a href="https://wa.me/8801742313132" target="_blank">
      ðŸ’¬ Contact on WhatsApp
    </a>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<script>
/* ===== COUNTRY CONFIG (E.164) ===== */
const countries = {
  "+880":{name:"Bangladesh",digits:10},
  "+91":{name:"India",digits:10},
  "+1":{name:"USA",digits:10},
  "+44":{name:"UK",digits:10},
  "+971":{name:"UAE",digits:9},
  "+92":{name:"Pakistan",digits:10},
  "+61":{name:"Australia",digits:9},
  "+49":{name:"Germany",digits:10},
  "+33":{name:"France",digits:9}
};

let currentCode = "+880";

const display = document.getElementById("country_display");
const hiddenCode = document.getElementById("country_code");
const otpWrap = document.getElementById("otpWrap");
const hiddenNumber = document.getElementById("whatsapp");
const list = document.getElementById("countryList");

/* BUILD OTP */
function buildOTP(d){
  otpWrap.innerHTML="";
  for(let i=0;i<d;i++){
    const input=document.createElement("input");
    input.type="tel";
    input.maxLength=1;
    input.inputMode="numeric";
    input.oninput=()=>{
      if(input.value && input.nextSibling) input.nextSibling.focus();
      collect();
    };
    input.onkeydown=e=>{
      if(e.key==="Backspace" && !input.value && input.previousSibling){
        input.previousSibling.focus();
      }
    };
    otpWrap.appendChild(input);
  }
}
function collect(){
  let v="";
  otpWrap.querySelectorAll("input").forEach(i=>v+=i.value);
  hiddenNumber.value=v;
}

/* INIT */
buildOTP(countries[currentCode].digits);

/* COUNTRY DROPDOWN */
display.onclick=()=>{
  list.innerHTML="";
  for(const code in countries){
    const d=document.createElement("div");
    d.className="country-item";
    d.textContent=`${code} ${countries[code].name}`;
    d.onclick=()=>{
      currentCode=code;
      display.value=`${code} ${countries[code].name}`;
      hiddenCode.value=code;
      buildOTP(countries[code].digits);
      list.style.display="none";
    };
    list.appendChild(d);
  }
  list.style.display="block";
};

/* SUBMIT UX */
const btn=document.getElementById("btn");
document.getElementById("leadForm").addEventListener("submit",()=>{
  btn.classList.add("loading");
  btn.innerText="Submitting...";
  setTimeout(()=>{
    document.getElementById("modal").style.display="flex";
    btn.classList.remove("loading");
    btn.innerText="Submit Request";
  },1200);
});
function closeModal(){
  document.getElementById("modal").style.display="none";
}
</script>

</body>
</html>
